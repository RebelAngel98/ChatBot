<html>
<head>
<title>main.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #808080;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
.s5 { color: #629755; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
main.py</font>
</center></td></tr></table>
<pre>
<span class="s1"># import the chatterbot package</span>
<span class="s1"># This is the chatbot engine we will use</span>
<span class="s2">from </span><span class="s0">chatterbot </span><span class="s2">import </span><span class="s0">ChatBot</span>


<span class="s1"># Give our chatbot a name</span>
<span class="s0">chatbot = ChatBot(</span><span class="s3">&quot;GLaDOS&quot;</span><span class="s0">)</span>

<span class="s1"># Packages used to Train your chatbot</span>
<span class="s2">from </span><span class="s0">chatterbot.trainers </span><span class="s2">import </span><span class="s0">ListTrainer</span>
<span class="s2">from </span><span class="s0">chatterbot.trainers </span><span class="s2">import </span><span class="s0">ChatterBotCorpusTrainer</span>

<span class="s1"># using game mechanics for portal 1 &amp; 2</span>
<span class="s0">personality_gamemechs = [</span>
    <span class="s3">&quot;Portal Gun - Designed to create and place portals on immobile surfaces, or surfaces covered with Conversion Gel that are big enough for the Portals to be opened.&quot;</span><span class="s2">,</span>
    <span class="s3">&quot;Test Chambers - Exactly as it sounds, these Test Chambers are used for testing subjects on mental capabilities and puzzle solving.&quot;</span><span class="s2">,</span>
    <span class="s3">&quot;Chamberlock - A room at the end of each Testing Chamber that doesn't allow items from the chambers to be brought through.&quot;</span><span class="s2">,</span>
    <span class="s3">&quot;Emergency Intelligence Incinerator - A chute that leads directly to a series of furnaces deep within the Aperture Science Facility.&quot;</span><span class="s2">,</span>
    <span class="s3">&quot;Material Emancipation Grill - Shimmering, semi-transparent particle fields that appear throughout the Aperture Science testing facilities. They disintegrate unauthorized Aperture Science equipment and blocks any portal that passes through. Doesn't affect Portal Gun.&quot;</span><span class="s2">,</span>
    <span class="s3">&quot;Unstationary Scaffold - A platform that, when activated, moves horizontally back and forth along a beam of blue light. Used to access previously unreachable places and bridges gaps over deadly substances/pitfalls.&quot;</span><span class="s2">,</span>
    <span class="s3">&quot;&quot;</span>
    
<span class="s0">]</span>

<span class="s0">personality_quotes = [</span>
   <span class="s3">&quot;Killing you and giving you advice aren't mututally exclusive. The rocket really is the way to go.&quot;</span><span class="s2">,</span>
   <span class="s3">&quot;Remember when teh platform was sliding into the fire pit and I said, 'Goodbye,' and you were like, 'No way,' and then I was all, 'We pretended we were trying to murder you'? That was great.&quot;</span><span class="s2">,</span>
   <span class="s3">&quot;That jumpsuit you're wearing looks stupid. That's not me talking, it's right here on your file. On other people it looks fine, but right here a scientist has noted that on you it looks stupid. Well, what does a neck-bearded old engineer know about fashion? He probably- Oh, wait. It's a she. Still, what does she know? Oh wait, it says she has a medical degree. In fashion! From France!&quot;</span>
   <span class="s3">&quot;How are you holding up? BECAUSE I'M A POTATO. [clap clap clap] Oh good. My slow clap processor made it into this thing. So we have that.&quot;</span><span class="s2">,</span>
   <span class="s3">&quot;No tricks. This potato only generates 1.1 volts of electricity. I literally do not have the energy to lie to you.&quot;</span>
<span class="s0">]</span>



<span class="s1"># Set the trainers we want train</span>
<span class="s0">trainer_personality_quotes=ListTrainer(chatbot)</span>
<span class="s0">trainer_personality_gamemechs= ListTrainer(chatbot)</span>
<span class="s0">trainer = ChatterBotCorpusTrainer(chatbot)</span>

<span class="s1"># Now here we actually train our chatbot on the corpus</span>
<span class="s1"># This is what gives our chatbot its personality </span>
<span class="s1"># Train the personality you want to override should come first</span>

<span class="s1"># Standard personality chatterbot comes with</span>
<span class="s0">trainer.train(</span><span class="s3">'chatterbot.corpus.english'</span><span class="s0">)</span>
<span class="s0">trainer_personality_gamemechs.train(personality_gamemechs)</span>
<span class="s0">trainer_personality_quotes.train(personality_quotes)</span>

<span class="s3">''' ******************* GUI Below Engine Above **************** '''</span>
<span class="s1"># Import for the GUI </span>
<span class="s2">from </span><span class="s0">chatbot_gui </span><span class="s2">import </span><span class="s0">ChatbotGUI</span>

<span class="s1"># create the chatbot app</span>
<span class="s3">&quot;&quot;&quot; 
    Options 
    - title: App window title. 
    - gif_path: File Path to the ChatBot gif. 
    - show_timestamps: If the chat has time-stamps. 
    - default_voice_options: The voice options provided to the text-to-speech engine by default if not specified 
                             when calling the send_ai_message() function. 
&quot;&quot;&quot;</span>
<span class="s0">app = ChatbotGUI(</span>
    <span class="s0">title=</span><span class="s3">&quot;the cake is a lie  - GLaDOS&quot;</span><span class="s2">,</span>
    <span class="s0">gif_path=</span><span class="s3">&quot;Glados.gif&quot;</span><span class="s2">,</span>
    <span class="s0">show_timestamps=</span><span class="s2">True,</span>
    <span class="s0">default_voice_options={</span>
        <span class="s3">&quot;rate&quot;</span><span class="s0">: </span><span class="s4">100</span><span class="s2">,</span>
        <span class="s3">&quot;volume&quot;</span><span class="s0">: </span><span class="s4">0.8</span><span class="s2">,</span>
        <span class="s3">&quot;voice&quot;</span><span class="s0">: </span><span class="s3">&quot;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\Tokens\TTS_MS_EN-US_ZIRA_11.0&quot;</span>
    <span class="s0">}</span>
<span class="s0">)</span>


<span class="s1"># define the function that handles incoming user messages</span>
<span class="s0">@app.event</span>
<span class="s2">def </span><span class="s0">on_message(chat: ChatbotGUI</span><span class="s2">, </span><span class="s0">text: str):</span>
    <span class="s5">&quot;&quot;&quot; 
    This is where you can add chat bot functionality! 
 
    You can use chat.send_ai_message(text, callback, voice_options) to send a message as the AI. 
        params: 
            - text: the text you want the bot to say 
            - callback: a function which will be executed when the AI is done talking 
            - voice_options: a dictionary where you can provide options for the AI's speaking voice 
                default: { 
                   &quot;rate&quot;: 100, 
                   &quot;volume&quot;: 0.8, 
                   &quot;voice&quot;: &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\Tokens\TTS_MS_EN-US_ZIRA_11.0&quot; 
                } 
 
    You can use chat.start_gif() and chat.stop_gif() to start and stop the gif. 
    You can use chat.clear() to clear the user and AI chat boxes. 
 
    You can use chat.process_and_send_ai_message to offload chatbot processing to a thread to prevent the GUI from 
    freezing up. 
        params: 
            - ai_response_generator: A function which takes a string as it's input (user message) and responds with 
                                     a string (AI's response). 
            - text: The text that the ai is responding to. 
            - callback: a function which will be executed when the AI is done talking 
            - voice_options: a dictionary where you can provide options for the AI's speaking voice 
                default: { 
                   &quot;rate&quot;: 100, 
                   &quot;volume&quot;: 0.8, 
                   &quot;voice&quot;: &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\Tokens\TTS_MS_EN-US_ZIRA_11.0&quot; 
                } 
 
    :param chat: The chat box object. 
    :param text: Text the user has entered. 
    :return: 
    &quot;&quot;&quot;</span>
    <span class="s1"># this is where you can add chat bot functionality!</span>
    <span class="s1"># text is the text the user has entered into the chat</span>
    <span class="s1"># you can use chat.send_ai_message(&quot;some text&quot;) to send a message as the AI, this will do background</span>
    <span class="s1"># you can use chat.start_gif() and chat.stop_gif() to start and stop the gif</span>
    <span class="s1"># you can use chat.clear() to clear the user and AI chat boxes</span>

    <span class="s1"># print the text the user entered to console</span>
    <span class="s0">print(</span><span class="s3">&quot;User Entered Message: &quot; </span><span class="s0">+ text)             </span>
    
    <span class="s3">''' Here you can intercept the user input and override the bot 
     output with your own responses and commands.'''</span>
    <span class="s1"># if the user send the &quot;clear&quot; message clear the chats</span>
    <span class="s2">if </span><span class="s0">text.lower().find(</span><span class="s3">&quot;erase chat&quot;</span><span class="s0">) != -</span><span class="s4">1</span><span class="s0">:</span>
        <span class="s0">chat.clear()</span>
    <span class="s1"># user can say any form of bye to close the chat.</span>
    <span class="s2">elif </span><span class="s0">text.lower().find(</span><span class="s3">&quot;bye&quot;</span><span class="s0">) != -</span><span class="s4">1</span><span class="s0">:</span>
        <span class="s1"># define a callback which will close the application</span>
        <span class="s2">def </span><span class="s0">close():</span>
            <span class="s0">chat.exit()</span>
            <span class="s0">chat.send_ai_message(</span><span class="s3">&quot;__pycache__&quot;</span><span class="s2">, </span><span class="s0">callback=close)</span>
    <span class="s2">elif </span><span class="s0">text.lower().find(</span><span class="s3">&quot;hey&quot;</span><span class="s0">) != -</span><span class="s4">1</span><span class="s0">:</span>
        <span class="s0">print(</span><span class="s3">&quot;Hello human. I am GLaDOS&quot;</span><span class="s0">)</span>
    <span class="s2">elif </span><span class="s0">text.lower().find(</span><span class="s3">&quot;hi&quot;</span><span class="s0">) != -</span><span class="s4">1</span><span class="s0">:</span>
        <span class="s0">print(</span><span class="s3">&quot;Welcome to Aperture Science Testing Facilities. I am GLaDOS.&quot;</span><span class="s0">)</span>
    <span class="s2">elif </span><span class="s0">text.lower().find(</span><span class="s3">&quot;cake&quot;</span><span class="s0">) != -</span><span class="s4">1</span><span class="s0">:</span>
        <span class="s0">print(</span><span class="s3">&quot;You will get your cake at the end of this course.&quot;</span><span class="s0">)</span>
    <span class="s2">elif </span><span class="s0">text.lower().find(</span><span class="s3">&quot;companion cube&quot;</span><span class="s0">) != -</span><span class="s4">1</span><span class="s0">:</span>
        <span class="s0">print(</span><span class="s3">&quot;Take your cube. It is yours.&quot;</span><span class="s0">)</span>
        <span class="s1"># send the goodbye message and provide the close function as a callback</span>
    <span class="s2">else</span><span class="s0">:</span>
        <span class="s1"># offload chat bot processing to a worker thread and also send the result as an ai message</span>
        <span class="s0">chat.process_and_send_ai_message(chatbot.get_response</span><span class="s2">, </span><span class="s0">text)</span>


<span class="s1"># run the chat bot application</span>
<span class="s0">app.run()</span>
</pre>
</body>
</html>